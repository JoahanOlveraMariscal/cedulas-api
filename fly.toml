app = "cedulas-api"
primary_region = "lax"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = false      # ≙ no “stop”; mantenga caliente la VM
  auto_start_machines = true
  min_machines_running = 1        # 1 instancia siempre viva
  processes = ["app"]
  [http_service.concurrency]      # protege recursos en 0.1–1 CPU y 1 GB
    type = "requests"
    soft_limit = 1
    hard_limit = 2

# (Opcional) Healthcheck: su endpoint ligero de salida a Internet
[[checks]]
  grace_period = "20s"
  interval     = "30s"
  method       = "get"
  path         = "/diag/httpbin"
  port         = 8080
  timeout      = "10s"
  type         = "http"

[[vm]]
  cpu_kind = "shared"
  cpus     = 1
  memory   = "1024mb"             # use 2048mb si ve OOM; no duplique con memory_mb
